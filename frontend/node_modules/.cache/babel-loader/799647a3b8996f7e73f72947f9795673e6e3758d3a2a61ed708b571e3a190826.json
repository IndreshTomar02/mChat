{"ast":null,"code":"import axios from 'axios';\nconst API = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:4000/api'\n});\nexport async function register(email, password, name) {\n  const r = await API.post('/auth/register', {\n    email,\n    password,\n    name\n  });\n  return r.data;\n}\nexport async function login(email, password) {\n  const r = await API.post('/auth/login', {\n    email,\n    password\n  });\n  return r.data;\n}\nexport async function sendMessage(token, sessionId, input, model = 'gpt-4o-mini', temperature = 0.2) {\n  const r = await API.post('/chat/message', {\n    sessionId,\n    input,\n    model,\n    temperature\n  }, {\n    headers: {\n      Authorization: 'Bearer ' + token\n    }\n  });\n  return r.data;\n}\nexport function streamMessage(token, params, onChunk, onDone, onError) {\n  const url = (process.env.REACT_APP_API_URL || 'http://localhost:4000/api') + '/chat/stream' + '?input=' + encodeURIComponent(params.input || '') + '&model=' + encodeURIComponent(params.model || '') + '&temperature=' + encodeURIComponent(params.temperature || '') + '&token=' + encodeURIComponent(token); // ðŸ‘ˆ add token in URL\n\n  const es = new EventSource(url);\n  es.onmessage = e => {\n    if (e.data === '[DONE]') {\n      onDone();\n      es.close();\n      return;\n    }\n    onChunk(e.data);\n  };\n  es.onerror = err => {\n    onError(err);\n    es.close();\n  };\n  return es;\n}","map":{"version":3,"names":["axios","API","create","baseURL","process","env","REACT_APP_API_URL","register","email","password","name","r","post","data","login","sendMessage","token","sessionId","input","model","temperature","headers","Authorization","streamMessage","params","onChunk","onDone","onError","url","encodeURIComponent","es","EventSource","onmessage","e","close","onerror","err"],"sources":["C:/mChat_final/frontend/src/api.js"],"sourcesContent":["import axios from 'axios';\nconst API = axios.create({ baseURL: process.env.REACT_APP_API_URL || 'http://localhost:4000/api' });\n\nexport async function register(email, password, name){\n  const r = await API.post('/auth/register', { email, password, name });\n  return r.data;\n}\nexport async function login(email, password){\n  const r = await API.post('/auth/login', { email, password });\n  return r.data;\n}\nexport async function sendMessage(token, sessionId, input, model='gpt-4o-mini', temperature=0.2){\n  const r = await API.post('/chat/message', { sessionId, input, model, temperature }, { headers: { Authorization: 'Bearer ' + token } });\n  return r.data;\n}\nexport function streamMessage(token, params, onChunk, onDone, onError) {\n  const url =\n    (process.env.REACT_APP_API_URL || 'http://localhost:4000/api') +\n    '/chat/stream' +\n    '?input=' + encodeURIComponent(params.input || '') +\n    '&model=' + encodeURIComponent(params.model || '') +\n    '&temperature=' + encodeURIComponent(params.temperature || '') +\n    '&token=' + encodeURIComponent(token); // ðŸ‘ˆ add token in URL\n\n  const es = new EventSource(url);\n  es.onmessage = (e) => {\n    if (e.data === '[DONE]') {\n      onDone();\n      es.close();\n      return;\n    }\n    onChunk(e.data);\n  };\n  es.onerror = (err) => {\n    onError(err);\n    es.close();\n  };\n  return es;\n}\n\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC;EAAEC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI;AAA4B,CAAC,CAAC;AAEnG,OAAO,eAAeC,QAAQA,CAACC,KAAK,EAAEC,QAAQ,EAAEC,IAAI,EAAC;EACnD,MAAMC,CAAC,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,gBAAgB,EAAE;IAAEJ,KAAK;IAAEC,QAAQ;IAAEC;EAAK,CAAC,CAAC;EACrE,OAAOC,CAAC,CAACE,IAAI;AACf;AACA,OAAO,eAAeC,KAAKA,CAACN,KAAK,EAAEC,QAAQ,EAAC;EAC1C,MAAME,CAAC,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,aAAa,EAAE;IAAEJ,KAAK;IAAEC;EAAS,CAAC,CAAC;EAC5D,OAAOE,CAAC,CAACE,IAAI;AACf;AACA,OAAO,eAAeE,WAAWA,CAACC,KAAK,EAAEC,SAAS,EAAEC,KAAK,EAAEC,KAAK,GAAC,aAAa,EAAEC,WAAW,GAAC,GAAG,EAAC;EAC9F,MAAMT,CAAC,GAAG,MAAMV,GAAG,CAACW,IAAI,CAAC,eAAe,EAAE;IAAEK,SAAS;IAAEC,KAAK;IAAEC,KAAK;IAAEC;EAAY,CAAC,EAAE;IAAEC,OAAO,EAAE;MAAEC,aAAa,EAAE,SAAS,GAAGN;IAAM;EAAE,CAAC,CAAC;EACtI,OAAOL,CAAC,CAACE,IAAI;AACf;AACA,OAAO,SAASU,aAAaA,CAACP,KAAK,EAAEQ,MAAM,EAAEC,OAAO,EAAEC,MAAM,EAAEC,OAAO,EAAE;EACrE,MAAMC,GAAG,GACP,CAACxB,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAI,2BAA2B,IAC7D,cAAc,GACd,SAAS,GAAGuB,kBAAkB,CAACL,MAAM,CAACN,KAAK,IAAI,EAAE,CAAC,GAClD,SAAS,GAAGW,kBAAkB,CAACL,MAAM,CAACL,KAAK,IAAI,EAAE,CAAC,GAClD,eAAe,GAAGU,kBAAkB,CAACL,MAAM,CAACJ,WAAW,IAAI,EAAE,CAAC,GAC9D,SAAS,GAAGS,kBAAkB,CAACb,KAAK,CAAC,CAAC,CAAC;;EAEzC,MAAMc,EAAE,GAAG,IAAIC,WAAW,CAACH,GAAG,CAAC;EAC/BE,EAAE,CAACE,SAAS,GAAIC,CAAC,IAAK;IACpB,IAAIA,CAAC,CAACpB,IAAI,KAAK,QAAQ,EAAE;MACvBa,MAAM,CAAC,CAAC;MACRI,EAAE,CAACI,KAAK,CAAC,CAAC;MACV;IACF;IACAT,OAAO,CAACQ,CAAC,CAACpB,IAAI,CAAC;EACjB,CAAC;EACDiB,EAAE,CAACK,OAAO,GAAIC,GAAG,IAAK;IACpBT,OAAO,CAACS,GAAG,CAAC;IACZN,EAAE,CAACI,KAAK,CAAC,CAAC;EACZ,CAAC;EACD,OAAOJ,EAAE;AACX","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}